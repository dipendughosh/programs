//digital clock (APRIL 2006)
#include<graphics.h>
#include<stdio.h>
#include<math.h>
#include<dos.h>
#include<conio.h>
#include"segment.h"
#include"visual.h"
//#include"mouse.h"

/*timex();
core();*/


void main()
{	int gd = DETECT,gm;
	initgraph(&gd,&gm,"C:\\tc\\bgi");
	if(initmouse()==0)
	{	mainscreen();
		miniwindow("Pixel Magic");
		setfillstyle(SOLID_FILL,DARKGRAY);
		fillellipse(183,163,20,20);
		setcolor(15);
		setfillstyle(SOLID_FILL,RED);
		fillellipse(180,160,20,20);
		settextstyle(3,0,7);
		setcolor(15);
		outtextxy(168,117,"x");
		settextstyle(0,0,1);
		sound(2000);
		delay(400);
		nosound();
		setcolor(RED);
		outtextxy(240,150,"ERROR");
		setcolor(0);
		outtextxy(240,170,"The problem may be due to:");
		outtextxy(240,200,"Mouse is NOT Installed OR");
		outtextxy(240,215,"Mouse Druver Corrupted OR");
		outtextxy(240,230,"Unsupported Mouse");
		setcolor(BLUE);
		outtextxy(240,260,"PRESS ANY KEY TO EXIT");
		getch();
		closegraph();
		restorecrtmode();
	}
	else
	{	core();
	}
}

/*core()
{	int x,y,m,n,button;
	mainscreen();
	miniwindow("Pixel Magic");
	blackbox(160,138);
	normalbutton(190,258,"Version");
	normalbutton(345,258,"Close");
	timex();
	return(0);
} */

/*timex()
{	struct time t;
	int a,b,c,e=0,f=0,g=0,h=0,m=25,x,y,z=0,button;
	WIN:
	gettime(&t);
	a=t.ti_hour;
	b=t.ti_min;
	c=t.ti_sec;
	z=fmod(c,2);
	switch(z)
	{	case 0:
			setfillstyle(SOLID_FILL,10);
			bar(313,145,323,155);
			bar(313,225,323,235);
		break;
		case 1:
			setfillstyle(SOLID_FILL,0);
			bar(313,145,323,155);
			bar(313,225,323,235);
		break;
	}
	if(a>12)
	{	a=a-12;
	}
	if(a==0)
	{	a=12;
	}
	else
	{	a=a;
	}
	e=a/10;
	f=fmod(a,10);
	g=b/10;
	h=fmod(b,10);
	if(m!=h)
	{	arrange(e,163,10);
		arrange(f,236,10);
		arrange(g,328,10);
		arrange(h,400,10);
		m=h;
	}
	showmouse();
	getmouse(&button,&x,&y);
	closebutton();
	if((button&1)==1)
	{	if(x>=345 && x<=445 && y>=258 && y<=278)
		{	clickedbutton(345,258,"Close");
			delay(200);
			normalbutton(345,258,"Close");
			delay(1000);
			restorecrtmode();
			exit(1);
		}
		if(x>=190 && x<=290 && y>=258 && y<=278)
		{	clickedbutton(190,258,"Version");
			delay(200);
			normalbutton(190,258,"Version");
			delay(1000);
			hidemouse();
			version();
		}
	}
	goto WIN;
}*/